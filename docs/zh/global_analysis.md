# 全局分析
&emsp;在基于函数摘要的自底向上分析中，由于我们以单个函数为分析边界且未考虑程序执行的顺序，导致无法解析来自函数外部的变量状态(比如外部变量、函数参数)，我们将其抽象为"anything"。如上所述，我们对一些关键的anything进行了标记，在全局分析这一阶段，我们的目标便是解析这些关键anything的状态。<br>
&emsp;全局分析阶段会从程序的入口点开始，按照程序执行的调用顺序重新对每个调用链上的函数进行分析。此阶段基本复用自底向上分析阶段的代码，唯一的区别是，我们并不分析所有语句，而是只分析那些包含关键anything状态的语句(比如"call anything()")。自底向上阶段生成的函数摘要同样能够复用。每分析一个方法时，我们查看其函数摘要中是否存在标记的关键State。若无，直接结束该方法的分析；若有，则只重新分析关键State所在的语句。若重新分析后，该语句的输出State发生变化，则也会分析后续受此变化影响的语句。<br>
&emsp;在全局分析阶段，我们会维护一个调用栈，按照程序执行过程的调用顺序将函数依次入栈。当分析某个关键anything状态时，我们会沿着调用栈向上逐层搜寻，直到能够将该anything和具体的State关联上为止。<br>
在此阶段我们还会维护一个call-path，用于记录每条调用路径。相比于调用图，call-path不会添加不存在的调用关系，因此更加精确。
